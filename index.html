<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Rosi & Warda Wedding</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Montserrat:wght@300;400&display=swap" rel="stylesheet">
</head>
<body>

<!-- COVER -->
<section class="cover">
  <p class="small">Undangan Pernikahan</p>

  <p class="guest">
    Kepada Yth.<br>
    <span id="guestName">Tamu Undangan</span>
  </p>

  <h1>Ahmad Rosidi<br>&amp;<br>Wardatul Hasanah</h1>
  <p class="date">Maret 2026</p>

  <div class="countdown">
    <div><span id="days">0</span><small>Hari</small></div>
    <div><span id="hours">0</span><small>Jam</small></div>
    <div><span id="minutes">0</span><small>Menit</small></div>
    <div><span id="seconds">0</span><small>Detik</small></div>
  </div>

  <a href="#content" class="btn" onclick="playMusic()">Buka Undangan</a>
</section>

<div id="content">

<!-- AYAT -->
<section class="section fade-up">
  <div class="decor-top"></div>
  <div class="decor-bottom"></div>

  <p class="quote">
    â€œDan di antara tanda-tanda kekuasaan-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri agar kamu merasa tenteram.â€
    <br><span>(QS. Ar-Rum: 21)</span>
  </p>
</section>

<!-- MEMPELAI -->
<section class="section fade-up">
  <div class="decor-top"></div>
  <div class="decor-bottom"></div>

  <h2>Mempelai</h2>

  <div class="card">
    <h3>Ahmad Rosidi</h3>
    <p>Putra dari<br>Ibu Asmara<br>&amp; Bapak Mursyid</p>
  </div>

  <div class="divider">â™¥</div>

  <div class="card">
    <h3>Wardatul Hasanah</h3>
    <p>Putri dari<br>Ibu Mutia<br>&amp; Bapak Alm. Abdurrahman</p>
  </div>
</section>

<!-- DETAIL ACARA -->
<section class="section fade-up">
  <div class="decor-top"></div>
  <div class="decor-bottom"></div>

  <h2>Detail Acara</h2>

  <div class="card">
    <h3>Akad Nikah</h3>
    <p>Minggu<br><strong>29 Maret 2026</strong></p>
  </div>

  <div class="card">
    <h3>Resepsi</h3>
    <p>Senin<br><strong>30 Maret 2026</strong></p>
  </div>

  <a class="btn-outline" href="https://goo.gl/maps/iAqbqMrJ1ZebaMQJ8?g_st=aw" target="_blank">
    Lihat Lokasi
  </a>
</section>

<!-- RSVP -->
<section class="section fade-up">
  <div class="decor-top"></div>
  <div class="decor-bottom"></div>

  <h2>Konfirmasi Kehadiran</h2>
  <p>Mohon konfirmasi kehadiran Anda</p>

  <a class="btn" href="https://wa.me/6281917280886?text=Assalamualaikum,%20saya%20akan%20hadir%20di%20acara%20pernikahan%20Rosi%20%26%20Warda" target="_blank">
    Hadir
  </a>

  <br><br>

  <a class="btn-outline" href="https://wa.me/6281917280886?text=Maaf,%20saya%20belum%20bisa%20hadir%20di%20acara%20pernikahan%20Rosi%20%26%20Warda" target="_blank">
    Tidak Hadir
  </a>
</section>

<!-- UCAPAN -->
<section class="section fade-up">
  <div class="decor-top"></div>
  <div class="decor-bottom"></div>

  <h2>Ucapan & Doa</h2>

  <form class="wish-form">
    <input type="text" name="nama" id="wishName" placeholder="Nama Anda" required>
    <textarea name="ucapan" placeholder="Tulis ucapan dan doa..." required></textarea>
    <button type="submit" class="btn">Kirim Ucapan</button>
  </form>

  <div id="wishList" class="wish-list"></div>
</section>

<!-- PENUTUP -->
<section class="section fade-up">
  <p class="penutup">
    Merupakan suatu kehormatan dan kebahagiaan bagi kami apabila
    Bapak/Ibu/Saudara/i berkenan hadir dan memberikan doa restu.
  </p>
  <p class="thanks">Terima kasih ğŸ¤</p>
</section>

</div>
  
<!-- AUDIO -->
<audio id="bgMusic" loop>
  <source src="music" type="audio/mpeg">
</audio>

<!-- MUSIC BUTTON -->
<button id="musicBtn" class="music-btn">ğŸ”Š</button>

<!-- SCRIPT UMUM -->
<script>
  const music = document.getElementById("bgMusic");
  const musicBtn = document.getElementById("musicBtn");

  function playMusic() {
    music.play();
    musicBtn.style.display = "flex";
  }

  musicBtn.addEventListener("click", () => {
    if (music.paused) {
      music.play();
      musicBtn.innerText = "ğŸ”Š";
    } else {
      music.pause();
      musicBtn.innerText = "ğŸ”‡";
    }
  });

  const params = new URLSearchParams(window.location.search);
  const guest = params.get("to");

  if (guest) {
    const cleanName = decodeURIComponent(guest.replace(/\+/g, " "));
    document.getElementById("guestName").innerText = cleanName;
    const wishInput = document.getElementById("wishName");
    if (wishInput) wishInput.value = cleanName;
  }

  const weddingDate = new Date("March 30, 2026 08:00:00").getTime();
  setInterval(() => {
    const now = Date.now();
    const d = weddingDate - now;
    if (d < 0) return;
    days.innerText = Math.floor(d / 86400000);
    hours.innerText = Math.floor((d % 86400000) / 3600000);
    minutes.innerText = Math.floor((d % 3600000) / 60000);
    seconds.innerText = Math.floor((d % 60000) / 1000);
  }, 1000);

  const observer = new IntersectionObserver(entries =>
    entries.forEach(e => e.isIntersecting && e.target.classList.add("show"))
  );
  document.querySelectorAll(".fade-up").forEach(el => observer.observe(el));
</script>

<!-- FIREBASE -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, addDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCzTI7XY1P5wga1LpZJZrnRbIrmghUBuAQ",
    authDomain: "undangan-afdb2.firebaseapp.com",
    projectId: "undangan-afdb2",
    storageBucket: "undangan-afdb2.appspot.com",
    messagingSenderId: "116844618079",
    appId: "1:116844618079:web:d583cf909016356f4f96ea"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const form = document.querySelector(".wish-form");
  const list = document.getElementById("wishList");

  form.addEventListener("submit", async e => {
    e.preventDefault();
    await addDoc(collection(db, "ucapan"), {
      nama: form.nama.value,
      ucapan: form.ucapan.value,
      time: Date.now()
    });
    form.reset();
  });

  const q = query(collection(db, "ucapan"), orderBy("time", "desc"));
  onSnapshot(q, snap => {
    list.innerHTML = "";
    snap.forEach(d => {
      const x = d.data();
      list.innerHTML += `
        <div class="wish-card">
          <strong>${x.nama}</strong>
          <p>${x.ucapan}</p>
        </div>`;
    });
  });
</script>
  
</body>
</html>
